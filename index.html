<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Amazon LWA Fixed Demo</title>

  <style>
    body {
      font-family: system-ui, Arial;
      display:flex;
      align-items:center;
      justify-content:center;
      height:100vh;
      margin:0;
      background:#f6f7fb;
    }
    .card {
      background:#fff;
      padding:24px;
      border-radius:12px;
      box-shadow:0 6px 18px rgba(0,0,0,0.08);
      width:360px;
      text-align:center;
    }
    button {
      padding:10px 16px;
      border-radius:8px;
      border:none;
      cursor:pointer;
      font-weight:600;
    }
    .lwa-btn { background:#232f3e; color:#fff; }
  </style>
</head>
<body>

<div class="card">
  <h2>Amazon LWA Demo</h2>

  <button id="LoginWithAmazon" class="lwa-btn">
    Link Amazon Account
  </button>

  <div id="amazon-root"></div>
</div>


<script>
/* Load Amazon SDK */
(function(d){
    var a = d.createElement('script');
    a.type = 'text/javascript';
    a.async = true;
    a.id = 'amazon-login-sdk';
    a.src = 'https://api-cdn.amazon.com/sdk/login1.js';
    d.getElementById('amazon-root').appendChild(a);
})(document);


/* SDK READY */
window.onAmazonLoginReady = function () {

    amazon.Login.setClientId('amzn1.application-oa2-client.1a47cbc877e04854b273c26ce5b2f5b3');

    document.getElementById('LoginWithAmazon').onclick = function () {

        var redirectUri = 'https://jayant-saksham.github.io/Amazon-LWA-Login/index.html';

        var options = {
            scope: 'profile',
            response_type: 'code',
            state: Math.random().toString(36).slice(2),
            popup: false        // fullscreen redirect
        };

        amazon.Login.setAmazonDomain(amazon.Login.amazonDomain['in']);

        // IMPORTANT: redirect URI must be 2nd parameter when popup=false
        amazon.Login.authorize(options, redirectUri);

        return false;
    };
};
</script>

</body>
</html>
